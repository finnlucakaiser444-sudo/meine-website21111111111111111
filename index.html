<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° CODE QUEST - 100% KOSTENLOS</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #00f2fe 100%);
            background-size: 400% 400%;
            animation: bgShift 15s ease infinite;
            color: #1a1a1a;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        @keyframes bgShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .screen { display: none; min-height: 100vh; padding: 2rem; }
        .screen.active { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        .header {
            text-align: center;
            margin-bottom: 3rem;
            animation: slideDown 0.8s ease-out;
        }
        
        @keyframes slideDown { from { opacity: 0; transform: translateY(-50px); } to { opacity: 1; transform: translateY(0); } }
        
        .logo-container {
            max-width: 500px;
            margin: 0 auto 2rem;
            animation: logoFloat 3s ease-in-out infinite;
            background: white;
            border-radius: 25px;
            padding: 2rem;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }
        
        .logo-container img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .subtitle {
            font-size: 1.8rem;
            font-weight: 800;
            color: #fff;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            margin-bottom: 1rem;
            letter-spacing: 0.5px;
        }
        
        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #FFD700 0%, #FF1493 100%);
            color: #000;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-weight: 900;
            font-size: 1.3rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(255, 20, 147, 0.6);
            border: 3px solid #fff;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse { 
            0%, 100% { transform: scale(1); box-shadow: 0 10px 40px rgba(255, 20, 147, 0.6); } 
            50% { transform: scale(1.05); box-shadow: 0 15px 50px rgba(255, 20, 147, 0.8); } 
        }
        
        .modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            width: 100%;
            margin-bottom: 2rem;
        }
        
        .mode-btn {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 215, 0, 0.8);
            border-radius: 25px;
            padding: 2.5rem 2rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .mode-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            transition: left 0.6s;
            pointer-events: none;
        }
        
        .mode-btn:hover::before { left: 100%; }
        .mode-btn:hover { 
            transform: translateY(-15px) scale(1.05); 
            box-shadow: 0 25px 60px rgba(255, 20, 147, 0.4); 
            border-color: #FF1493; 
        }
        
        .mode-icon { 
            font-size: 5rem; 
            margin-bottom: 1rem; 
            display: block; 
            animation: iconFloat 2.5s ease-in-out infinite; 
        }
        
        @keyframes iconFloat { 
            0%, 100% { transform: translateY(0px) rotate(0deg); } 
            50% { transform: translateY(-10px) rotate(5deg); } 
        }
        
        .mode-name { 
            font-size: 1.5rem; 
            font-weight: 900; 
            color: #FF1493; 
            margin-bottom: 0.5rem; 
            letter-spacing: 0.5px;
        }
        
        .mode-desc { 
            font-size: 1rem; 
            color: #333; 
            font-weight: 600; 
            line-height: 1.5;
        }
        
        .editor-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            max-width: 1400px;
            width: 100%;
            margin-bottom: 2rem;
        }
        
        .panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(255, 215, 0, 0.6);
        }
        
        .panel-title {
            font-size: 1.5rem;
            font-weight: 900;
            color: #FF1493;
            margin-bottom: 1.5rem;
            letter-spacing: 0.5px;
        }
        
        textarea {
            width: 100%;
            padding: 1.5rem;
            border: 2px solid rgba(255, 215, 0, 0.6);
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            font-weight: 500;
            line-height: 1.8;
            background: #1a1a1a;
            color: #00ff88;
            resize: vertical;
            min-height: 500px;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5), 0 0 20px rgba(255, 215, 0, 0.2);
            transition: border-color 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: #FF1493;
        }
        
        textarea::placeholder { color: #666; }
        
        .output {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 1.5rem;
            border: 2px solid rgba(255, 215, 0, 0.6);
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            color: #00ff88;
            min-height: 400px;
            overflow-y: auto;
            font-weight: 500;
            line-height: 1.8;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .output-line { margin-bottom: 0.8rem; }
        .output-error { color: #ff4444; font-weight: 900; }
        .output-success { color: #00ff88; }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }
        
        button {
            flex: 1;
            min-width: 140px;
            padding: 1.2rem 2rem;
            border: none;
            border-radius: 12px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.3);
            transition: left 0.5s;
        }
        
        button:hover::before { left: 100%; }
        
        .btn-primary {
            background: linear-gradient(135deg, #FF1493 0%, #FF69B4 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(255, 20, 147, 0.4);
        }
        
        .btn-primary:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 15px 45px rgba(255, 20, 147, 0.6); 
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #00CED1 0%, #00BFFF 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(0, 206, 209, 0.4);
        }
        
        .btn-secondary:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 15px 45px rgba(0, 206, 209, 0.6); 
        }
        
        .back-btn {
            background: linear-gradient(135deg, #00CED1 0%, #00BFFF 100%);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-weight: 800;
            cursor: pointer;
            font-size: 1rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 206, 209, 0.4);
            transition: all 0.3s;
        }
        
        .back-btn:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 15px 45px rgba(0, 206, 209, 0.6); 
        }
        
        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .game-tile {
            background: linear-gradient(135deg, #FF1493 0%, #FF69B4 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(255, 20, 147, 0.3);
            font-weight: 800;
            font-size: 1.1rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .game-tile:hover { 
            transform: scale(1.08); 
            box-shadow: 0 15px 45px rgba(255, 20, 147, 0.5); 
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 5000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal.active { display: flex; }
        
        .modal-content {
            background: linear-gradient(135deg, #fff 0%, #f5f5f5 100%);
            border-radius: 25px;
            padding: 3rem;
            max-width: 600px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            border: 3px solid #FFD700;
            animation: modalPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes modalPop {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .modal-icon {
            font-size: 6rem;
            margin-bottom: 1rem;
            animation: iconSpin 1s ease-in-out;
        }
        
        @keyframes iconSpin {
            from { transform: rotate(0deg) scale(0); }
            to { transform: rotate(360deg) scale(1); }
        }
        
        .modal-title {
            font-size: 2.5rem;
            font-weight: 900;
            color: #FF1493;
            margin-bottom: 1rem;
        }
        
        .modal-text {
            font-size: 1.5rem;
            font-weight: 800;
            color: #000;
            margin-bottom: 2rem;
        }
        
        .modal-btn {
            background: linear-gradient(135deg, #FF1493 0%, #FF69B4 100%);
            color: white;
            padding: 1.2rem 3rem;
            border: none;
            border-radius: 15px;
            font-weight: 900;
            cursor: pointer;
            font-size: 1.2rem;
            box-shadow: 0 10px 30px rgba(255, 20, 147, 0.4);
            transition: all 0.3s;
        }
        
        .modal-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 45px rgba(255, 20, 147, 0.6);
        }
        
        .help-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, #FFD700 0%, #FF1493 100%);
            color: #000;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 3px solid #fff;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 20, 147, 0.5);
            transition: all 0.3s;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
        }
        
        .help-btn:hover {
            transform: scale(1.15) rotate(15deg);
            box-shadow: 0 15px 45px rgba(255, 20, 147, 0.7);
        }
        
        .hint-box {
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid #FFD700;
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1rem;
            font-weight: 700;
            color: #000;
        }
        
        .score-display {
            font-size: 2rem;
            font-weight: 900;
            color: #FFD700;
            text-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            margin-bottom: 1rem;
        }
        
        @media (max-width: 768px) {
            .editor-container {
                grid-template-columns: 1fr;
            }
            
            .modes {
                grid-template-columns: 1fr;
            }
            
            .subtitle {
                font-size: 1.3rem;
            }
            
            .badge {
                font-size: 1rem;
                padding: 0.8rem 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div id="homeScreen" class="screen active">
        <div class="header">
            <div class="logo-container">
                <img src="logo.png" alt="CODE QUEST">
            </div>
            <div class="subtitle">üöÄ Lerne Programmieren - Spielerisch & Kostenlos! üöÄ</div>
            <div class="badge">‚ú® 100% GRATIS - KEINE ANMELDUNG ‚ú®</div>
        </div>
        
        <div class="modes">
            <div class="mode-btn" onclick="goToMode('html')">
                <span class="mode-icon">üåê</span>
                <div class="mode-name">HTML EDITOR</div>
                <div class="mode-desc">Erstelle deine eigene Webseite mit HTML!</div>
            </div>
            
            <div class="mode-btn" onclick="goToMode('js')">
                <span class="mode-icon">‚ö°</span>
                <div class="mode-name">JAVASCRIPT EDITOR</div>
                <div class="mode-desc">Programmiere mit JavaScript und sieh sofort das Ergebnis!</div>
            </div>
            
            <div class="mode-btn" onclick="goToMode('quiz')">
                <span class="mode-icon">üéØ</span>
                <div class="mode-name">CODE QUIZ</div>
                <div class="mode-desc">Teste dein Wissen mit spannenden Coding-Fragen!</div>
            </div>
            
            <div class="mode-btn" onclick="goToMode('challenges')">
                <span class="mode-icon">üèÜ</span>
                <div class="mode-name">CODE CHALLENGES</div>
                <div class="mode-desc">L√∂se Programmier-Aufgaben und sammle Punkte!</div>
            </div>
        </div>
    </div>

    <div id="htmlScreen" class="screen">
        <button class="back-btn" onclick="backHome()">‚Üê ZUR√úCK</button>
        <div class="header">
            <div class="panel-title">üåê HTML EDITOR</div>
        </div>
        <div class="editor-container">
            <div class="panel">
                <div class="panel-title">üìù HTML CODE</div>
                <textarea id="htmlCode" placeholder="Schreibe hier deinen HTML Code...
Beispiel:
<h1>Hallo Welt!</h1>
<p>Das ist meine erste Webseite!</p>
<button>Klick mich!</button>"></textarea>
                <div class="btn-group">
                    <button class="btn-primary" onclick="runHTML()">‚ñ∂Ô∏è VORSCHAU</button>
                    <button class="btn-secondary" onclick="clearHTML()">üóëÔ∏è L√ñSCHEN</button>
                </div>
            </div>
            <div class="panel">
                <div class="panel-title">üëÄ VORSCHAU</div>
                <div id="htmlPreview" class="output">Klick VORSCHAU um deine Webseite zu sehen!</div>
            </div>
        </div>
    </div>

    <div id="jsScreen" class="screen">
        <button class="back-btn" onclick="backHome()">‚Üê ZUR√úCK</button>
        <div class="header">
            <div class="panel-title">‚ö° JAVASCRIPT EDITOR</div>
        </div>
        <div class="editor-container">
            <div class="panel">
                <div class="panel-title">üìù JAVASCRIPT CODE</div>
                <textarea id="jsCode" placeholder="Schreibe hier deinen JavaScript Code...
Beispiel:
console.log('Hallo Welt!');
let zahl = 5 + 3;
console.log('5 + 3 = ' + zahl);"></textarea>
                <div class="btn-group">
                    <button class="btn-primary" onclick="runJS()">‚ñ∂Ô∏è AUSF√úHREN</button>
                    <button class="btn-secondary" onclick="clearJS()">üóëÔ∏è L√ñSCHEN</button>
                </div>
            </div>
            <div class="panel">
                <div class="panel-title">üìä AUSGABE</div>
                <div id="jsOutput" class="output">Hier wird die Ausgabe angezeigt...</div>
            </div>
        </div>
    </div>

    <div id="quizScreen" class="screen">
        <button class="back-btn" onclick="backHome()">‚Üê ZUR√úCK</button>
        <div class="header">
            <div class="panel-title">üéØ CODE QUIZ</div>
            <div class="score-display">‚≠ê PUNKTE: <span id="quizScore">0</span></div>
        </div>
        <div class="panel" style="max-width: 900px; width: 100%;">
            <div class="panel-title" id="quizQuestion">Was gibt dieser Code aus?</div>
            <div id="quizOptions" class="game-grid"></div>
            <div class="panel-title" id="quizMessage" style="margin-top: 2rem;"></div>
            <button class="btn-primary" onclick="nextQuiz()" style="width: 100%; margin-top: 2rem;">‚û°Ô∏è N√ÑCHSTE FRAGE</button>
        </div>
    </div>

    <div id="challengesScreen" class="screen">
        <button class="back-btn" onclick="backHome()">‚Üê ZUR√úCK</button>
        <div class="header">
            <div class="panel-title">üèÜ CODE CHALLENGES</div>
        </div>
        <div class="editor-container">
            <div class="panel">
                <div class="panel-title" id="challengeTitle">Challenge</div>
                <div class="panel-title" id="challengeDesc" style="font-size: 1.1rem; font-weight: 700; color: #000;"></div>
                <textarea id="challengeCode"></textarea>
                <div class="btn-group">
                    <button class="btn-primary" onclick="runChallenge()">‚úÖ L√ñSUNG PR√úFEN</button>
                    <button class="btn-secondary" onclick="showHint()">üí° HINWEIS</button>
                </div>
                <div id="hintBox" class="hint-box" style="display: none;">
                    <strong>üí° HINWEIS:</strong> <span id="hintText"></span>
                </div>
            </div>
            <div class="panel">
                <div class="panel-title">üìä AUSGABE</div>
                <div id="challengeOutput" class="output">Hier wird die Ausgabe angezeigt...</div>
            </div>
        </div>
    </div>

    <div id="successModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon">üéâ</div>
            <div class="modal-title">GESCHAFFT!</div>
            <div class="modal-text" id="successText">+100 PUNKTE!</div>
            <button class="modal-btn" onclick="closeModal()">WEITER</button>
        </div>
    </div>

    <button class="help-btn" onclick="openHelp()">‚ùì</button>

    <script>
        const challenges = [
            { title: 'üéØ Challenge 1', desc: 'Gib "Hallo Welt!" aus', code: '// Schreibe hier deinen Code\n', hint: 'Nutze console.log()', test: r => r.includes('Hallo Welt!') },
            { title: 'üéØ Challenge 2', desc: 'Rechne 10 + 5 und gib das Ergebnis aus', code: '// Schreibe hier deinen Code\n', hint: 'let ergebnis = 10 + 5; console.log(ergebnis);', test: r => r.includes('15') },
            { title: 'üéØ Challenge 3', desc: 'Erstelle eine Variable "name" mit deinem Namen und gib sie aus', code: '// Schreibe hier deinen Code\n', hint: 'let name = "Dein Name"; console.log(name);', test: r => r.length > 0 },
            { title: 'üéØ Challenge 4', desc: 'Gib die Zahlen 1 bis 5 aus (mit einer Schleife)', code: '// Schreibe hier deinen Code\n', hint: 'for (let i = 1; i <= 5; i++) { console.log(i); }', test: r => r.includes('1') && r.includes('5') }
        ];

        const quizzes = [
            { q: 'console.log(5 + 3);', opts: ['8', '53', 'undefined', 'Error'], ans: 0 },
            { q: 'let x = 10;\nconsole.log(x * 2);', opts: ['20', '10', '102', 'Error'], ans: 0 },
            { q: 'console.log("Hallo" + " " + "Welt");', opts: ['Hallo Welt', 'HalloWelt', 'Error', 'undefined'], ans: 0 },
            { q: 'let y = 5;\ny = y + 1;\nconsole.log(y);', opts: ['5', '6', '51', 'Error'], ans: 1 },
            { q: 'console.log(10 > 5);', opts: ['true', 'false', '10', 'Error'], ans: 0 },
            { q: 'let name = "Max";\nconsole.log(name);', opts: ['Max', 'name', 'undefined', 'Error'], ans: 0 },
            { q: 'console.log(3 * 4);', opts: ['12', '34', '7', 'Error'], ans: 0 },
            { q: 'let a = 2;\nlet b = 3;\nconsole.log(a + b);', opts: ['5', '23', 'undefined', 'Error'], ans: 0 },
            { q: 'console.log(typeof 42);', opts: ['number', 'string', 'undefined', 'Error'], ans: 0 },
            { q: 'console.log(true || false);', opts: ['true', 'false', 'undefined', 'Error'], ans: 0 },
            { q: 'let arr = [1, 2, 3];\nconsole.log(arr[0]);', opts: ['1', '0', 'undefined', 'Error'], ans: 0 },
            { q: 'console.log("Test".toUpperCase());', opts: ['TEST', 'test', 'Test', 'Error'], ans: 0 },
            { q: 'let z;\nconsole.log(z);', opts: ['undefined', 'null', '0', 'Error'], ans: 0 },
            { q: 'console.log(10 % 3);', opts: ['1', '3', '0', 'Error'], ans: 0 },
            { q: 'for (let i = 0; i < 3; i++) {}\nconsole.log(i);', opts: ['0', '3', 'undefined', 'Error'], ans: 3 },
            { q: 'function f() { return 10; }\nconsole.log(f());', opts: ['10', 'undefined', 'f', 'Error'], ans: 0 },
            { q: 'let x = "5";\nconsole.log(x + 3);', opts: ['8', '53', '5', 'Error'], ans: 1 },
            { q: 'if (5 > 3) { console.log("Ja"); }', opts: ['Ja', 'undefined', 'Error', 'false'], ans: 0 },
            { q: 'let obj = {name: "Tom"};\nconsole.log(obj.age);', opts: ['Tom', 'undefined', 'Error', 'null'], ans: 1 },
            { q: '[1, 2, 3].length', opts: ['3', '2', '1', 'undefined'], ans: 0 },
            { q: 'true && false', opts: ['true', 'false', 'undefined', 'Error'], ans: 1 },
            { q: '"Hello".length', opts: ['5', '4', 'undefined', 'Error'], ans: 0 }
        ];

        let currentChallenge = 0;
        let currentQuiz = 0;
        let quizScore = 0;

        function goToMode(mode) {
            document.getElementById('homeScreen').classList.remove('active');
            document.getElementById(mode + 'Screen').classList.add('active');
            if (mode === 'quiz') startQuiz();
            if (mode === 'challenges') loadChallenge();
        }

        function backHome() {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('homeScreen').classList.add('active');
        }

        function runHTML() {
            const code = document.getElementById('htmlCode').value;
            const preview = document.getElementById('htmlPreview');
            try {
                preview.innerHTML = code;
            } catch (e) {
                preview.innerHTML = '<div style="color: red; font-weight: 900;">Fehler: ' + e.message + '</div>';
            }
        }

        function clearHTML() {
            document.getElementById('htmlCode').value = '';
            document.getElementById('htmlPreview').innerHTML = 'Klick VORSCHAU um deine Webseite zu sehen!';
        }

        function runJS() {
            const code = document.getElementById('jsCode').value;
            const output = [];
            const log = console.log;
            console.log = (...args) => output.push(args.join(' '));
            try {
                eval(code);
                console.log = log;
                document.getElementById('jsOutput').innerHTML = output.map(o => '<div class="output-line output-success">' + o + '</div>').join('');
            } catch (e) {
                console.log = log;
                document.getElementById('jsOutput').innerHTML = '<div class="output-line output-error">FEHLER: ' + e.message + '</div>';
            }
        }

        function clearJS() {
            document.getElementById('jsCode').value = '';
            document.getElementById('jsOutput').innerHTML = 'Hier wird die Ausgabe angezeigt...';
        }

        function startQuiz() {
            currentQuiz = 0;
            quizScore = 0;
            loadQuiz();
        }

        function loadQuiz() {
            if (currentQuiz >= quizzes.length) {
                document.getElementById('quizQuestion').textContent = 'Spiel vorbei!';
                document.getElementById('quizOptions').innerHTML = '';
                document.getElementById('quizMessage').textContent = 'Du hast ' + quizScore + '/' + quizzes.length + ' Punkte!';
                return;
            }
            const q = quizzes[currentQuiz];
            document.getElementById('quizQuestion').textContent = q.q;
            document.getElementById('quizOptions').innerHTML = q.opts.map((o, i) => '<button class="game-tile" onclick="answerQuiz(' + i + ')">' + o + '</button>').join('');
            document.getElementById('quizMessage').textContent = '';
            document.getElementById('quizScore').textContent = quizScore;
        }

        function answerQuiz(idx) {
            const q = quizzes[currentQuiz];
            if (idx === q.ans) {
                quizScore++;
                document.getElementById('quizMessage').textContent = '‚úÖ RICHTIG!';
            } else {
                document.getElementById('quizMessage').textContent = '‚ùå FALSCH! Richtig: ' + q.opts[q.ans];
            }
            document.querySelectorAll('#quizOptions button').forEach(b => b.disabled = true);
        }

        function nextQuiz() {
            currentQuiz++;
            loadQuiz();
        }

        function loadChallenge() {
            const c = challenges[currentChallenge];
            document.getElementById('challengeTitle').textContent = c.title;
            document.getElementById('challengeDesc').textContent = c.desc;
            document.getElementById('challengeCode').value = c.code;
            document.getElementById('hintBox').style.display = 'none';
            document.getElementById('hintText').textContent = c.hint;
        }

        function showHint() {
            document.getElementById('hintBox').style.display = 'block';
        }

        function runChallenge() {
            const c = challenges[currentChallenge];
            const code = document.getElementById('challengeCode').value;
            const output = [];
            const log = console.log;
            console.log = (...args) => output.push(args.join(' '));
            try {
                eval(code);
                console.log = log;
                const result = output.join('\n');
                document.getElementById('challengeOutput').innerHTML = '<div class="output-line output-success">' + result + '</div>';
                if (c.test(result)) {
                    document.getElementById('successText').textContent = '+100 PUNKTE!';
                    document.getElementById('successModal').classList.add('active');
                    currentChallenge++;
                    if (currentChallenge >= challenges.length) currentChallenge = 0;
                } else {
                    document.getElementById('challengeOutput').innerHTML = '<div class="output-line output-error">FALSCH!</div>';
                }
            } catch (e) {
                console.log = log;
                document.getElementById('challengeOutput').innerHTML = '<div class="output-line output-error">FEHLER: ' + e.message + '</div>';
            }
        }

        function closeModal() {
            document.getElementById('successModal').classList.remove('active');
            loadChallenge();
        }

        function openHelp() {
            window.open('https://www.youtube.com/channel/UCB_FqulKFZJZmIwNlR6q1xg', '_blank');
        }
    </script>
</body>
</html>
