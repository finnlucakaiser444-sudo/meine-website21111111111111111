<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• CODE QUEST COMPLETE - 100% Kostenlos</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700;800;900&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Fredoka', sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: #000;
            min-height: 100vh;
            overflow-x: hidden;
        }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .particle { position: absolute; width: 10px; height: 10px; background: rgba(255, 255, 255, 0.5); border-radius: 50%; animation: float 20s infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0) translateX(0); opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { transform: translateY(-100vh) translateX(100px); opacity: 0; } }
        
        .screen { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 2000; overflow-y: auto; padding: 20px; }
        .screen.active { display: flex; }
        .screen-content { text-align: center; max-width: 1400px; margin: auto; animation: slideUp 1s ease-out; position: relative; z-index: 10; width: 100%; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(100px); } to { opacity: 1; transform: translateY(0); } }
        
        .game-title { font-family: 'Orbitron', sans-serif; font-size: 5rem; font-weight: 900; margin-bottom: 1rem; background: linear-gradient(45deg, #FF6B6B, #FFD93D, #4ECDC4, #FF6B6B); background-size: 300% 300%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; animation: gradientFlow 3s ease infinite, bounce 2s ease-in-out infinite; letter-spacing: 3px; }
        @keyframes gradientFlow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-30px); } }
        
        .free-badge { display: inline-block; background: linear-gradient(135deg, #FFD93D 0%, #FF6B6B 100%); color: #000; padding: 1.5rem 3rem; border-radius: 50px; font-weight: 900; font-size: 1.8rem; margin-bottom: 2rem; box-shadow: 0 15px 50px rgba(255, 107, 107, 0.6); transform: rotate(-8deg); animation: pulse 1.5s ease-in-out infinite; border: 4px solid #FFF; }
        @keyframes pulse { 0%, 100% { transform: rotate(-8deg) scale(1); } 50% { transform: rotate(-8deg) scale(1.1); } }
        
        .game-subtitle { font-size: 2rem; margin-bottom: 3rem; font-weight: 800; color: #FFF; text-shadow: 0 4px 15px rgba(0, 0, 0, 0.5); }
        
        .mode-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2.5rem; margin-bottom: 3rem; }
        .mode-card { background: linear-gradient(135deg, #FFFFFF 0%, #F5F5F5 100%); border-radius: 40px; padding: 3rem; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); border: 6px solid #FFD93D; cursor: pointer; transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); position: relative; overflow: hidden; }
        .mode-card::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%); animation: shimmer 3s infinite; }
        .mode-card:hover { transform: translateY(-20px) scale(1.05); box-shadow: 0 40px 100px rgba(255, 107, 107, 0.5); border-color: #FF6B6B; }
        @keyframes shimmer { 0% { transform: translate(-50%, -50%); } 100% { transform: translate(50%, 50%); } }
        .mode-icon { font-size: 4rem; margin-bottom: 1rem; }
        .mode-title { font-size: 1.8rem; font-weight: 900; margin-bottom: 1rem; color: #FF6B6B; font-family: 'Orbitron', sans-serif; }
        .mode-description { font-size: 1.1rem; color: #000; font-weight: 700; line-height: 1.8; }
        
        .back-button { background: linear-gradient(135deg, #4ECDC4 0%, #7FE5E0 100%); color: white; border: none; padding: 1.2rem 2.5rem; font-size: 1.2rem; font-weight: 900; border-radius: 20px; cursor: pointer; transition: all 0.4s; box-shadow: 0 12px 35px rgba(78, 205, 196, 0.4); font-family: 'Orbitron', sans-serif; margin-bottom: 2rem; }
        .back-button:hover { transform: translateY(-4px); box-shadow: 0 18px 50px rgba(78, 205, 196, 0.6); }
        
        .container { max-width: 1400px; margin: 0 auto; }
        .editor-section { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; margin-bottom: 2rem; }
        .panel { background: linear-gradient(135deg, #FFFFFF 0%, #F9F9F9 100%); border-radius: 30px; padding: 2.5rem; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); border: 6px solid #FFD93D; }
        .panel h2 { margin-bottom: 1.5rem; color: #FF6B6B; font-size: 1.6rem; font-weight: 900; font-family: 'Orbitron', sans-serif; }
        
        .code-editor { background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%); color: #d4d4d4; padding: 2rem; border-radius: 20px; font-family: 'Courier New', monospace; font-size: 1.3rem; line-height: 2; border: 4px solid #FFD93D; min-height: 600px; overflow-y: auto; resize: vertical; font-weight: 600; box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 217, 61, 0.2); }
        .output-container { background: #1e1e1e; border-radius: 20px; padding: 1.5rem; min-height: 350px; color: #d4d4d4; font-family: 'Courier New', monospace; font-size: 1.1rem; overflow-y: auto; border: 4px solid #FFD93D; font-weight: 600; line-height: 1.8; box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5); }
        .output-line { margin-bottom: 0.8rem; word-break: break-all; }
        .output-error { color: #FF6B6B; font-weight: 900; }
        .output-success { color: #4ECDC4; font-weight: 900; }
        
        button { padding: 1.2rem 2.5rem; border: none; border-radius: 20px; font-weight: 900; cursor: pointer; transition: all 0.4s; font-size: 1.1rem; font-family: 'Orbitron', sans-serif; letter-spacing: 1px; position: relative; overflow: hidden; }
        button::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.2); transition: left 0.4s; }
        button:hover::before { left: 100%; }
        .btn-primary { background: linear-gradient(135deg, #FF6B6B 0%, #FF8E8E 100%); color: white; box-shadow: 0 12px 35px rgba(255, 107, 107, 0.4); }
        .btn-primary:hover { transform: translateY(-6px); box-shadow: 0 18px 50px rgba(255, 107, 107, 0.6); }
        .btn-secondary { background: linear-gradient(135deg, #4ECDC4 0%, #7FE5E0 100%); color: white; box-shadow: 0 12px 35px rgba(78, 205, 196, 0.4); }
        .btn-secondary:hover { transform: translateY(-6px); box-shadow: 0 18px 50px rgba(78, 205, 196, 0.6); }
        
        .editor-buttons { display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1.5rem; }
        .editor-buttons button { flex: 1; min-width: 120px; }
        
        .html-preview { background: white; border-radius: 20px; padding: 1.5rem; margin-top: 1.5rem; border: 4px solid #FFD93D; max-height: 400px; overflow-y: auto; }
        
        .game-container { background: linear-gradient(135deg, #FFFFFF 0%, #F9F9F9 100%); border-radius: 30px; padding: 2.5rem; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); border: 6px solid #FFD93D; margin-bottom: 2rem; }
        .game-board { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem; }
        .game-tile { background: linear-gradient(135deg, #FF6B6B 0%, #FF8E8E 100%); color: white; padding: 2rem; border-radius: 20px; font-size: 2rem; font-weight: 900; cursor: pointer; transition: all 0.3s; text-align: center; box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3); }
        .game-tile:hover { transform: scale(1.1); box-shadow: 0 12px 30px rgba(255, 107, 107, 0.5); }
        .game-tile.matched { background: linear-gradient(135deg, #4ECDC4 0%, #7FE5E0 100%); }
        
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); z-index: 3000; align-items: center; justify-content: center; padding: 20px; }
        .modal.active { display: flex; }
        .modal-content { background: linear-gradient(135deg, #FFFFFF 0%, #F5F5F5 100%); border-radius: 40px; padding: 3rem; max-width: 700px; width: 100%; text-align: center; box-shadow: 0 50px 150px rgba(0, 0, 0, 0.5); border: 6px solid #FFD93D; animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55); }
        @keyframes popIn { 0% { transform: scale(0.5) rotateZ(-10deg); opacity: 0; } 100% { transform: scale(1) rotateZ(0); opacity: 1; } }
        .modal-icon { font-size: 5rem; margin-bottom: 1.5rem; }
        .modal-title { font-size: 2.5rem; font-weight: 900; margin-bottom: 1.5rem; color: #FF6B6B; font-family: 'Orbitron', sans-serif; }
        .modal-message { color: #000; margin-bottom: 2rem; line-height: 1.8; font-size: 1.2rem; font-weight: 800; }
        .modal-buttons { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        
        @media (max-width: 1024px) { .editor-section { grid-template-columns: 1fr; } }
        @media (max-width: 768px) { .game-title { font-size: 3rem; } .mode-grid { grid-template-columns: 1fr; } .game-board { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>
    <div class="particles" id="particlesContainer"></div>

    <!-- Mode Selection -->
    <div id="modeScreen" class="screen active">
        <div class="screen-content">
            <div class="game-title">‚ö° CODE QUEST ‚ö°</div>
            <div class="free-badge">üéâ 100% KOSTENLOS üéâ</div>
            <div class="game-subtitle">W√§hle deinen Lernmodus!</div>

            <div class="mode-grid">
                <div class="mode-card" onclick="selectMode('html')">
                    <div class="mode-icon">üåê</div>
                    <div class="mode-title">HTML & CSS</div>
                    <div class="mode-description">Erstelle Webseiten! Live-Vorschau!</div>
                </div>

                <div class="mode-card" onclick="selectMode('free')">
                    <div class="mode-icon">‚úçÔ∏è</div>
                    <div class="mode-title">Selber Schreiben</div>
                    <div class="mode-description">JavaScript Code schreiben!</div>
                </div>

                <div class="mode-card" onclick="selectMode('games')">
                    <div class="mode-icon">üéÆ</div>
                    <div class="mode-title">Mit Spielen Lernen</div>
                    <div class="mode-description">Lerne durch coole Spiele!</div>
                </div>

                <div class="mode-card" onclick="selectMode('challenges')">
                    <div class="mode-icon">üéØ</div>
                    <div class="mode-title">Aufgaben L√∂sen</div>
                    <div class="mode-description">10 spannende Level!</div>
                </div>
            </div>
        </div>
    </div>



    <!-- HTML Mode -->
    <div id="htmlScreen" class="screen">
        <div class="screen-content container">
            <button class="back-button" onclick="backToMode()">‚Üê ZUR√úCK</button>
            <h1 style="color: white; font-size: 2.2rem; margin-bottom: 1.5rem; font-family: 'Orbitron', sans-serif;">üåê HTML & CSS EDITOR</h1>
            
            <div class="editor-section">
                <div class="panel">
                    <h2>üíª CODE</h2>
                    <textarea class="code-editor" id="htmlCodeEditor" placeholder="Schreib hier HTML & CSS..." style="color: #000;"><!DOCTYPE html>
<html>
<head>
    <style>
        body { background: #FF6B6B; color: #000; font-family: Arial; }
        h1 { text-align: center; }
    </style>
</head>
<body>
    <h1>üéâ Hallo Welt!</h1>
    <p>Das ist meine erste Webseite!</p>
</body>
</html></textarea>
                    <div class="editor-buttons">
                        <button class="btn-primary" onclick="runHTML()">üåê VORSCHAU</button>
                        <button class="btn-secondary" onclick="clearHTML()">üóëÔ∏è L√ñSCHEN</button>
                    </div>
                </div>

                <div class="panel">
                    <h2>üëÅÔ∏è VORSCHAU</h2>
                    <div class="html-preview" id="htmlPreview" style="display: none;"></div>
                    <div id="htmlPreviewMessage" style="color: #999; font-size: 1.2rem; font-weight: 700; text-align: center; padding: 2rem;">Klick auf VORSCHAU um deine Webseite zu sehen!</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Free Coding Mode -->
    <div id="freeScreen" class="screen">
        <div class="screen-content container">
            <button class="back-button" onclick="backToMode()">‚Üê ZUR√úCK</button>
            <h1 style="color: white; font-size: 2.2rem; margin-bottom: 1.5rem; font-family: 'Orbitron', sans-serif;">‚úçÔ∏è JAVASCRIPT SCHREIBEN</h1>
            
            <div class="editor-section">
                <div class="panel">
                    <h2>üíª CODE EDITOR</h2>
                    <textarea class="code-editor" id="freeCodeEditor" placeholder="Schreib hier deinen Code..." style="color: #000;">console.log('Hallo Welt!');</textarea>
                    <div class="editor-buttons">
                        <button class="btn-primary" onclick="runFreeCode()">‚ñ∂ AUSF√úHREN</button>
                        <button class="btn-secondary" onclick="clearFreeCode()">üóëÔ∏è L√ñSCHEN</button>
                    </div>
                </div>

                <div class="panel">
                    <h2>üì§ AUSGABE</h2>
                    <div class="output-container" id="freeOutput">
                        <div class="output-line">Hier wird die Ausgabe angezeigt...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Games Mode -->
    <div id="gamesScreen" class="screen">
        <div class="screen-content container">
            <button class="back-button" onclick="backToMode()">‚Üê ZUR√úCK</button>
            <h1 style="color: white; font-size: 2.2rem; margin-bottom: 1.5rem; font-family: 'Orbitron', sans-serif;">üéÆ MIT SPIELEN LERNEN</h1>
            
            <div class="game-container">
                <h2 style="color: #FF6B6B; margin-bottom: 2rem; font-size: 1.8rem; font-family: 'Orbitron', sans-serif;">üíª CODE QUIZ</h2>
                <p style="color: #000; margin-bottom: 2rem; font-size: 1.1rem; font-weight: 700;">Was ist die richtige Antwort? Teste dein Programmier-Wissen!</p>
                <div style="background: #f5f5f5; border-radius: 20px; padding: 2rem; margin-bottom: 2rem; border: 3px solid #FFD93D;">
                    <div id="quizQuestion" style="color: #000; font-size: 1.3rem; font-weight: 900; margin-bottom: 2rem; font-family: 'Courier New', monospace; background: #1e1e1e; color: #4ECDC4; padding: 1.5rem; border-radius: 15px;"></div>
                    <div id="quizOptions" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 2rem;"></div>
                    <p id="quizMessage" style="color: #000; font-size: 1.1rem; font-weight: 700; text-align: center;"></p>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <button class="btn-primary" onclick="nextQuiz()">‚Üí N√ÑCHSTE FRAGE</button>
                    <button class="btn-secondary" onclick="startQuiz()">üîÑ NEUES SPIEL</button>
                </div>
                <p id="quizScore" style="color: #000; margin-top: 2rem; font-size: 1.2rem; font-weight: 900; text-align: center;">Punkte: 0/0</p>
            </div>

            <div class="game-container">
                <h2 style="color: #FF6B6B; margin-bottom: 2rem; font-size: 1.8rem; font-family: 'Orbitron', sans-serif;">üß© LOGIK-R√ÑTSEL</h2>
                <p style="color: #000; margin-bottom: 2rem; font-size: 1.1rem; font-weight: 700;">L√∂se Programmier-R√§tsel! Was gibt dieser Code aus?</p>
                <div style="background: #f5f5f5; border-radius: 20px; padding: 2rem; margin-bottom: 2rem; border: 3px solid #FFD93D;">
                    <div id="puzzleCode" style="color: #000; font-size: 1.2rem; font-weight: 700; margin-bottom: 2rem; font-family: 'Courier New', monospace; background: #1e1e1e; color: #4ECDC4; padding: 1.5rem; border-radius: 15px;"></div>
                    <div id="puzzleOptions" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 2rem;"></div>
                    <p id="puzzleMessage" style="color: #000; font-size: 1.1rem; font-weight: 700; text-align: center;"></p>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <button class="btn-primary" onclick="nextPuzzle()">‚Üí N√ÑCHSTES R√ÑTSEL</button>
                    <button class="btn-secondary" onclick="startPuzzles()">üîÑ NEUES SPIEL</button>
                </div>
                <p id="puzzleScore" style="color: #000; margin-top: 2rem; font-size: 1.2rem; font-weight: 900; text-align: center;">Punkte: 0/0</p>
            </div>
        </div>
    </div>

    <!-- Challenges Mode -->
    <div id="challengesScreen" class="screen">
        <div class="screen-content container">
            <button class="back-button" onclick="backToMode()">‚Üê ZUR√úCK</button>
            <h1 style="color: white; font-size: 2.2rem; margin-bottom: 1.5rem; font-family: 'Orbitron', sans-serif;">üéØ AUFGABEN L√ñSEN</h1>
            
            <div class="editor-section">
                <div class="panel">
                    <h2>üìù AUFGABE</h2>
                    <div style="font-size: 1.3rem; font-weight: 900; margin-bottom: 1rem; color: #000;" id="challengeTitle">Aufgabe</div>
                    <div style="color: #000; margin-bottom: 1.5rem; line-height: 1.8; font-size: 1.1rem; font-weight: 700;" id="challengeDescription">Beschreibung</div>
                    <div id="hintContainer" style="display: none; background: linear-gradient(135deg, #FFE66D 0%, #FFD93D 100%); border-left: 6px solid #FF6B6B; padding: 1.5rem; margin-bottom: 1.5rem; border-radius: 15px; font-size: 1rem; font-weight: 700; color: #000;">
                        <strong>üí° TIPP:</strong>
                        <div id="hintText" style="margin-top: 0.8rem;"></div>
                    </div>
                    <div style="background: linear-gradient(135deg, #95E1D3 0%, #7FE5E0 100%); border-left: 6px solid #4ECDC4; padding: 1.5rem; border-radius: 15px; font-size: 1rem; font-weight: 700;">
                        <strong style="display: block; margin-bottom: 0.8rem; color: #000;">‚úì ERWARTETE AUSGABE:</strong>
                        <div id="expectedOutput" style="font-family: 'Courier New', monospace; background: white; padding: 1rem; border-radius: 10px; font-weight: 700; font-size: 1rem; color: #000;"></div>
                    </div>
                </div>

                <div class="panel">
                    <h2>üíª CODE REPARIEREN</h2>
                    <textarea class="code-editor" id="challengeCodeEditor" placeholder="Der Code wird hier angezeigt..." style="color: #000;"></textarea>
                    <div class="editor-buttons">
                        <button class="btn-primary" onclick="runChallenge()">‚ñ∂ CODE TESTEN</button>
                        <button class="btn-secondary" onclick="showHint()">üí° TIPP</button>
                        <button class="btn-secondary" onclick="resetChallenge()">‚Üª ZUR√úCKSETZEN</button>
                    </div>
                </div>
            </div>

            <div class="panel" style="margin-top: 2rem;">
                <h2>üì§ AUSGABE</h2>
                <div class="output-container" id="challengeOutput">
                    <div class="output-line">Hier wird die Ausgabe angezeigt...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon">üéâ</div>
            <div class="modal-title">GL√úCKWUNSCH!</div>
            <div class="modal-message" id="successMessage"></div>
            <div class="modal-buttons">
                <button class="btn-primary" onclick="closeModal()">‚úì OK</button>
            </div>
        </div>
    </div>

    <script>
        function createParticles() {
            const container = document.getElementById('particlesContainer');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 20 + 20) + 's';
                container.appendChild(particle);
            }
        }
        createParticles();

        const challenges = [
            { title: 'Hallo Welt!', description: 'Schreib "Hallo"', hint: 'console.log("Hallo")', expectedOutput: 'Hallo', testCode: (o) => o.includes('Hallo'), brokenCode: 'console.log(Hallo);' },
            { title: 'Plus rechnen', description: 'Berechne 3 + 2', hint: 'console.log(3 + 2)', expectedOutput: '5', testCode: (o) => o.includes('5'), brokenCode: 'console.log(3 2);' },
            { title: 'Mal rechnen', description: 'Berechne 4 * 5', hint: 'console.log(4 * 5)', expectedOutput: '20', testCode: (o) => o.includes('20'), brokenCode: 'console.log(4 + 5);' },
            { title: 'Variable', description: 'Speichere "Max"', hint: 'let x = "Max"; console.log(x);', expectedOutput: 'Max', testCode: (o) => o.includes('Max'), brokenCode: 'let x = "Max"\nconsole.log(x);' },
            { title: 'Wenn-Bedingung', description: 'Wenn 5 > 3, schreib "Ja"', hint: 'if (5 > 3) { console.log("Ja"); }', expectedOutput: 'Ja', testCode: (o) => o.includes('Ja'), brokenCode: 'if (5 < 3) { console.log("Ja"); }' },
            { title: 'Schleife', description: 'Schreib "Hi" 3 mal', hint: 'for (let i = 0; i < 3; i++) { console.log("Hi"); }', expectedOutput: 'Hi\nHi\nHi', testCode: (o) => (o.match(/Hi/g) || []).length === 3, brokenCode: 'for (let i = 0; i < 3;) { console.log("Hi"); }' },
            { title: 'Array', description: 'Gib a[0] aus', hint: 'let a = ["A", "B"]; console.log(a[0]);', expectedOutput: 'A', testCode: (o) => o.includes('A'), brokenCode: 'let a = ["A", "B"]; console.log(a[1]);' },
            { title: 'Funktion', description: 'Schreib function f() { return 10; }', hint: 'function f() { return 10; } console.log(f());', expectedOutput: '10', testCode: (o) => o.includes('10'), brokenCode: 'function f() { 10; } console.log(f());' },
            { title: 'Objekt', description: 'Gib obj.name aus', hint: 'let obj = {name: "Tom"}; console.log(obj.name);', expectedOutput: 'Tom', testCode: (o) => o.includes('Tom'), brokenCode: 'let obj = {name: "Tom"}; console.log(obj);' },
            { title: 'Z√§hlen', description: 'Z√§hle 1 bis 5', hint: 'for (let i = 1; i <= 5; i++) { console.log(i); }', expectedOutput: '1\n2\n3\n4\n5', testCode: (o) => (o.match(/[1-5]/g) || []).length >= 5, brokenCode: 'for (let i = 1; i < 5; i++) { console.log(i); }' }
        ];

        let currentMode = null;
        let currentChallengeIdx = 0;
        let quizIdx = 0;
        let quizScore = 0;
        let puzzleIdx = 0;
        let puzzleScore = 0;

        const quizzes = [
            { question: 'let x = 5;\nconsole.log(x + 3);', options: ['5', '8', '53', 'Error'], answer: 1 },
            { question: 'let arr = [1, 2, 3];\nconsole.log(arr[0]);', options: ['1', '2', '3', 'undefined'], answer: 0 },
            { question: 'for (let i = 0; i < 3; i++) {}\nconsole.log(i);', options: ['0', '3', 'undefined', 'Error'], answer: 1 },
            { question: 'function f() { return 10; }\nconsole.log(f());', options: ['10', 'undefined', 'f', 'Error'], answer: 0 },
            { question: 'let x = "5";\nconsole.log(x + 3);', options: ['8', '53', '5', 'Error'], answer: 1 },
            { question: 'if (5 > 3) { console.log("Ja"); }', options: ['Ja', 'undefined', 'Error', 'false'], answer: 0 },
            { question: 'let obj = {name: "Tom"};\nconsole.log(obj.age);', options: ['Tom', 'undefined', 'Error', 'null'], answer: 1 },
            { question: '[1, 2, 3].length', options: ['3', '2', '1', 'undefined'], answer: 0 },
            { question: 'true && false', options: ['true', 'false', 'undefined', 'Error'], answer: 1 },
            { question: '"Hello".length', options: ['5', '4', 'undefined', 'Error'], answer: 0 }
        ];

        const puzzles = [
            { code: 'let x = 0;\nfor (let i = 1; i <= 3; i++) {\n  x += i;\n}\nconsole.log(x);', options: ['6', '3', '1', '0'], answer: 0 },
            { code: 'let arr = [1, 2, 3, 4];\nlet sum = 0;\nfor (let n of arr) {\n  sum += n;\n}\nconsole.log(sum);', options: ['10', '4', '1234', '0'], answer: 0 },
            { code: 'function double(x) {\n  return x * 2;\n}\nconsole.log(double(5));', options: ['10', '5', '25', '2'], answer: 0 },
            { code: 'let x = 5;\nif (x > 3 && x < 10) {\n  console.log("Ja");\n}', options: ['Ja', 'undefined', 'Error', 'false'], answer: 0 },
            { code: 'let str = "Code";\nconsole.log(str.toUpperCase());', options: ['CODE', 'code', 'Code', 'Error'], answer: 0 },
            { code: 'let nums = [1, 2, 3];\nnums.push(4);\nconsole.log(nums.length);', options: ['4', '3', '2', 'Error'], answer: 0 },
            { code: 'let x = 10;\nlet y = x;\ny = 20;\nconsole.log(x);', options: ['10', '20', 'undefined', 'Error'], answer: 0 },
            { code: 'let obj = {a: 1, b: 2};\nconsole.log(Object.keys(obj));', options: ['["a","b"]', '[1,2]', 'Error', 'undefined'], answer: 0 },
            { code: '[1, 2, 3].map(x => x * 2)', options: ['[2,4,6]', '[1,2,3]', '6', 'Error'], answer: 0 },
            { code: 'let x = null;\nconsole.log(typeof x);', options: ['object', 'null', 'undefined', 'Error'], answer: 0 }
        ];

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeScreen').classList.remove('active');
            document.getElementById(mode + 'Screen').classList.add('active');
            if (mode === 'challenges') loadChallenge(0);
            if (mode === 'games') {
                startQuiz();
                startPuzzles();
            }
        }

        function backToMode() {
            document.getElementById(currentMode + 'Screen').classList.remove('active');
            document.getElementById('modeScreen').classList.add('active');
        }



        // HTML Mode
        function runHTML() {
            const code = document.getElementById('htmlCodeEditor').value;
            const preview = document.getElementById('htmlPreview');
            try {
                preview.innerHTML = code;
                preview.style.display = 'block';
                document.getElementById('htmlPreviewMessage').style.display = 'none';
            } catch (error) {
                alert('‚ùå Fehler: ' + error.message);
            }
        }
        function clearHTML() {
            document.getElementById('htmlCodeEditor').value = '';
            document.getElementById('htmlPreview').style.display = 'none';
            document.getElementById('htmlPreviewMessage').style.display = 'block';
        }

        // Free Coding
        function runFreeCode() {
            const code = document.getElementById('freeCodeEditor').value;
            const output = [];
            const originalLog = console.log;
            console.log = function(...args) { output.push(args.join(' ')); };
            try {
                eval(code);
                console.log = originalLog;
                displayOutput(output, 'freeOutput', 'success');
            } catch (error) {
                console.log = originalLog;
                displayOutput([`‚ùå FEHLER: ${error.message}`], 'freeOutput', 'error');
            }
        }
        function clearFreeCode() {
            document.getElementById('freeCodeEditor').value = '';
            document.getElementById('freeOutput').innerHTML = '<div class="output-line">Hier wird die Ausgabe angezeigt...</div>';
        }

        // Games Mode - Code Quiz
        function startQuiz() {
            quizIdx = 0;
            quizScore = 0;
            loadQuiz();
        }
        function loadQuiz() {
            if (quizIdx >= quizzes.length) {
                document.getElementById('quizMessage').textContent = `üéâ Spiel vorbei! Du hast ${quizScore}/${quizzes.length} Punkte!`;
                return;
            }
            const q = quizzes[quizIdx];
            document.getElementById('quizQuestion').textContent = q.question;
            document.getElementById('quizOptions').innerHTML = q.options.map((opt, idx) => `
                <button class="btn-secondary" onclick="answerQuiz(${idx})" style="padding: 1.5rem; font-size: 1.1rem;">${opt}</button>
            `).join('');
            document.getElementById('quizMessage').textContent = '';
            document.getElementById('quizScore').textContent = `Punkte: ${quizScore}/${quizzes.length}`;
        }
        function answerQuiz(idx) {
            const q = quizzes[quizIdx];
            if (idx === q.answer) {
                quizScore++;
                document.getElementById('quizMessage').textContent = '‚úÖ RICHTIG!';
            } else {
                document.getElementById('quizMessage').textContent = `‚ùå FALSCH! Richtig war: ${q.options[q.answer]}`;
            }
            document.querySelectorAll('#quizOptions button').forEach(btn => btn.disabled = true);
        }
        function nextQuiz() {
            quizIdx++;
            loadQuiz();
        }

        // Games Mode - Logic Puzzles
        function startPuzzles() {
            puzzleIdx = 0;
            puzzleScore = 0;
            loadPuzzle();
        }
        function loadPuzzle() {
            if (puzzleIdx >= puzzles.length) {
                document.getElementById('puzzleMessage').textContent = `üéâ Spiel vorbei! Du hast ${puzzleScore}/${puzzles.length} Punkte!`;
                return;
            }
            const p = puzzles[puzzleIdx];
            document.getElementById('puzzleCode').textContent = p.code;
            document.getElementById('puzzleOptions').innerHTML = p.options.map((opt, idx) => `
                <button class="btn-secondary" onclick="answerPuzzle(${idx})" style="padding: 1.5rem; font-size: 1.1rem;">${opt}</button>
            `).join('');
            document.getElementById('puzzleMessage').textContent = '';
            document.getElementById('puzzleScore').textContent = `Punkte: ${puzzleScore}/${puzzles.length}`;
        }
        function answerPuzzle(idx) {
            const p = puzzles[puzzleIdx];
            if (idx === p.answer) {
                puzzleScore++;
                document.getElementById('puzzleMessage').textContent = '‚úÖ RICHTIG!';
            } else {
                document.getElementById('puzzleMessage').textContent = `‚ùå FALSCH! Richtig war: ${p.options[p.answer]}`;
            }
            document.querySelectorAll('#puzzleOptions button').forEach(btn => btn.disabled = true);
        }
        function nextPuzzle() {
            puzzleIdx++;
            loadPuzzle();
        }

        // Challenges
        let memoryCards = [];
        function loadChallenge(idx) {
            currentChallengeIdx = idx;
            const c = challenges[idx];
            document.getElementById('challengeTitle').textContent = c.title;
            document.getElementById('challengeDescription').textContent = c.description;
            document.getElementById('expectedOutput').textContent = c.expectedOutput;
            document.getElementById('challengeCodeEditor').value = c.brokenCode;
            document.getElementById('hintContainer').style.display = 'none';
        }
        function runChallenge() {
            const code = document.getElementById('challengeCodeEditor').value;
            const c = challenges[currentChallengeIdx];
            const output = [];
            const originalLog = console.log;
            console.log = function(...args) { output.push(args.join(' ')); };
            try {
                eval(code);
                console.log = originalLog;
                displayOutput(output, 'challengeOutput', 'success');
                if (c.testCode(output.join('\n'))) {
                    document.getElementById('successMessage').textContent = 'üéä +100 PUNKTE!';
                    document.getElementById('successModal').classList.add('active');
                } else {
                    displayOutput(['‚ùå FALSCH!'], 'challengeOutput', 'error');
                }
            } catch (error) {
                console.log = originalLog;
                displayOutput([`‚ùå FEHLER: ${error.message}`], 'challengeOutput', 'error');
            }
        }
        function showHint() {
            document.getElementById('hintText').textContent = challenges[currentChallengeIdx].hint;
            document.getElementById('hintContainer').style.display = 'block';
        }
        function resetChallenge() {
            document.getElementById('challengeCodeEditor').value = challenges[currentChallengeIdx].brokenCode;
        }

        function displayOutput(lines, containerId, type = 'success') {
            const container = document.getElementById(containerId);
            container.innerHTML = lines.map(line => `<div class="output-line ${type === 'error' ? 'output-error' : 'output-success'}">${line}</div>`).join('');
        }

        function closeModal() {
            document.getElementById('successModal').classList.remove('active');
        }
    </script>
</body>
</html>
